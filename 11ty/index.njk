<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recipes Notebook</title>
  {% if env == "production" %}
  <style>
    {% set css %}{% getUiCss %}{% endset %}
    {{ css | cssmin | safe }}
  </style>
  {% else %}
  <link rel="stylesheet" href="/src/style.css">
  {% endif %}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
</head>

<body>
  <main>
    <ul class="cards" style="--total: {{ cocktails.length + 1 }};">
      <!-- Sheet 0: Front=Cover, Back=Recipe 1 Title/Photo -->
      <li class="card" style="--i: 0;">
        <div class="page">
          <div class="front cover-front">
            <h1>Cocktail<br>Recipes</h1>
            <p>A Collection of Classics</p>
          </div>
          <div class="back plain-page">
            <div class="recipe-intro">
              <h2>{{ cocktails[0].title }}</h2>
              <picture>
                {% if cocktails[0].cover.avif2x %}
                <source type="image/avif"
                  srcset="{{ cocktails[0].cover.avif2x }} 2x, {{ cocktails[0].cover.avif1x }} 1x">
                {% endif %}
                {% if cocktails[0].cover.png2x %}
                <source srcset="{{ cocktails[0].cover.png2x }} 2x, {{ cocktails[0].cover.png1x }} 1x">
                {% endif %}
                <img src="{{ cocktails[0].cover.png1x }}" alt="{{ cocktails[0].cover.alt }}" width="340" height="480" />
              </picture>
            </div>
          </div>
        </div>
      </li>

      {% for cocktail in cocktails %}
        {% if not loop.first %}
        <!-- Sheet {{ loop.index0 }}: Front=Recipe {{ loop.index0 }} Content, Back=Recipe {{ loop.index }} Title/Photo -->
        <li class="card" style="--i: {{ loop.index0 }};">
          <div class="page">
            <div class="front ruled-page">
              <div class="recipe-content">
                <h3>Ingredients {% if cocktails[loop.index0 - 1].servings %}<span>({{ cocktails[loop.index0 - 1].servings }})</span>{% endif %}</h3>
                <ul class="ingredients">
                  {% for ingredient in cocktails[loop.index0 - 1].ingredients %}
                  <li>{{ ingredient | safe }}</li>
                  {% endfor %}
                </ul>
                <h3>Instructions</h3>
                {% for instruction in cocktails[loop.index0 - 1].instructions %}
                <p class="instructions">{{ instruction | safe }}</p>
                {% endfor %}
              </div>
            </div>
            <div class="back plain-page">
              <div class="recipe-intro">
                <h2>{{ cocktail.title }}</h2>
                <picture>
                  {% if cocktail.cover.avif2x %}
                  <source type="image/avif"
                    srcset="{{ cocktail.cover.avif2x }} 2x, {{ cocktail.cover.avif1x }} 1x">
                  {% endif %}
                  {% if cocktail.cover.png2x %}
                  <source srcset="{{ cocktail.cover.png2x }} 2x, {{ cocktail.cover.png1x }} 1x">
                  {% endif %}
                  <img src="{{ cocktail.cover.png1x }}" alt="{{ cocktail.cover.alt }}" width="340" height="480" />
                </picture>
              </div>
            </div>
          </div>
        </li>
        {% endif %}
      {% endfor %}

      <!-- Sheet {{ cocktails.length }}: Front=Recipe {{ cocktails.length }} Content, Back=Back Cover -->
      <li class="card" style="--i: {{ cocktails.length }};">
        <div class="page">
          <div class="front ruled-page">
            <div class="recipe-content">
              <h3>Ingredients {% if cocktails[cocktails.length - 1].servings %}<span>({{ cocktails[cocktails.length - 1].servings }})</span>{% endif %}</h3>
              <ul class="ingredients">
                {% for ingredient in cocktails[cocktails.length - 1].ingredients %}
                <li>{{ ingredient | safe }}</li>
                {% endfor %}
              </ul>
              <h3>Instructions</h3>
              {% for instruction in cocktails[cocktails.length - 1].instructions %}
              <p class="instructions">{{ instruction | safe }}</p>
              {% endfor %}
            </div>
          </div>
          <div class="back cover-back">
            <h1>Made by Rob</h1>
            <p><svg width="32" height="32" viewBox="0 0 200 200" fill="currentColor">
                <path class="heart-svg"
                  d="M20,70 A40,40,0,0,1,100,70 A40,40,0,0,1,180,70 Q180,130,100,190 Q20,130,20,70 Z" />
              </svg></p>
          </div>
        </div>
      </li>

      <!-- Sheet {{ cocktails.length + 1 }}: No content - needed so we can turn to the back cover -->
      <li class="card" style="--i: {{ cocktails.length + 1 }};"></li>
    </ul>
  </main>

  <div class="book-controls">
    <button id="prevBtn" aria-label="Previous Page">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
    </button>
    <button id="nextBtn" aria-label="Next Page">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </button>
  </div>

  <nav class="notebook-tabs"></nav>

  {% if env == "production" %}
  <script>
    {% set js %}{% getUiJs %}{% endset %}
    {{ js | jsmin | safe }}
  </script>
  {% else %}
  <script type="module" src="/src/main.js"></script>
  {% endif %}
</body>

</html>
